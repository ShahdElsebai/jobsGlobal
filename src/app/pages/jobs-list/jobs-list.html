<div class="container mx-auto px-2 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-10">
  <div
    class="mb-8 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
    <h1 class="text-3xl font-bold text-center sm:text-left m-0">
      Latest Job Listings
    </h1>
    <div class="w-full sm:w-80">
      <app-jobs-filter
        (filterChanged)="onFilterChange($event)"></app-jobs-filter>
    </div>
  </div>

  @if (store.error()) {
    <div
      class="mb-6 flex items-start justify-between gap-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-red-700">
      <div class="text-sm">{{ store.error() }}</div>
      <button
        type="button"
        class="rounded-md bg-red-600 text-white px-3 py-1.5 text-sm hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500"
        (click)="store.fetchJobs()">
        Retry
      </button>
    </div>
  }

  @if (initialLoading()) {
    <div class="min-h-[40vh] sm:min-h-[50vh] flex items-center justify-center">
      <span
        class="inline-flex items-center gap-3 text-gray-600"
        role="status"
        aria-live="polite">
        <span
          class="h-6 w-6 rounded-full border-2 border-gray-300 border-t-blue-600 animate-spin"></span>
        <span>Loading jobsâ€¦</span>
      </span>
    </div>
  } @else {
    @if (filteredJobs().length) {
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        @for (job of filteredJobs(); track job.id) {
          <app-job-card
            [job]="job"
            (jobSelected)="openModalWithJob($event)"></app-job-card>
        }
      </div>

      <div class="mt-8 text-center">
        <app-jobs-pagination
          [loading]="store.loading()"
          [disabled]="loadMoreDisabled()"
          (loadMore)="onLoadMore()"></app-jobs-pagination>
      </div>
    } @else {
      <p class="text-center text-gray-500 mt-6">No jobs found.</p>
    }
  }

  <app-job-modal #jobModal></app-job-modal>
</div>
