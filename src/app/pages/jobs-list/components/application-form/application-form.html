<form
  [formGroup]="form"
  (submit)="onSubmit()"
  novalidate
  class="space-y-4 max-w-lg mx-auto">
  <div>
    <label for="name" class="block mb-1 font-semibold">Name</label>
    <input
      id="name"
      type="text"
      formControlName="name"
      class="input-field border rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
      [ngClass]="{ 'border-red-500': isControlInvalid('name') }" />
    @if (isControlInvalid('name')) {
      <div class="text-red-500 text-sm mt-1">Name is required.</div>
    }
  </div>

  <div>
    <label for="email" class="block mb-1 font-semibold">Email</label>
    <input
      id="email"
      type="email"
      formControlName="email"
      class="input-field border rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
      [ngClass]="{ 'border-red-500': isControlInvalid('email') }" />
    @if (isControlInvalid('email')) {
      <div class="text-red-500 text-sm mt-1">Enter a valid email.</div>
    }
  </div>

  <div>
    <label for="phone" class="block mb-1 font-semibold">Phone</label>
    <input
      id="phone"
      type="text"
      formControlName="phone"
      class="input-field border rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
      [ngClass]="{ 'border-red-500': isControlInvalid('phone') }" />
    @if (isControlInvalid('phone')) {
      <div class="text-red-500 text-sm mt-1">Phone is required.</div>
    }
  </div>

  <div>
    <label for="country" class="block mb-1 font-semibold">Country</label>
    <input
      id="country"
      type="text"
      formControlName="country"
      class="input-field border rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
      [ngClass]="{ 'border-red-500': isControlInvalid('country') }" />
    @if (isControlInvalid('country')) {
      <div class="text-red-500 text-sm mt-1">Country is required.</div>
    }
  </div>

  <div>
    <label for="education" class="block mb-1 font-semibold">Education</label>
    <input
      id="education"
      type="text"
      formControlName="education"
      class="input-field border rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
      [ngClass]="{ 'border-red-500': isControlInvalid('education') }" />
    @if (isControlInvalid('education')) {
      <div class="text-red-500 text-sm mt-1">Education is required.</div>
    }
  </div>

  <div>
    <label for="position" class="block mb-1 font-semibold">
      Current Position
    </label>
    <input
      id="position"
      type="text"
      formControlName="position"
      class="input-field border rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
      [ngClass]="{ 'border-red-500': isControlInvalid('position') }" />
    @if (isControlInvalid('position')) {
      <div class="text-red-500 text-sm mt-1">Current position is required.</div>
    }
  </div>

  <div>
    <label for="company" class="block mb-1 font-semibold">Company</label>
    <input
      id="company"
      type="text"
      formControlName="company"
      class="input-field border rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
      [ngClass]="{ 'border-red-500': isControlInvalid('company') }" />
    @if (isControlInvalid('company')) {
      <div class="text-red-500 text-sm mt-1">Company is required.</div>
    }
  </div>

  <div>
    <label for="cvUpload" class="block mb-1 font-semibold">
      CV Upload (Max 3MB)
    </label>
    <input
      id="cvUpload"
      type="file"
      (change)="onFileSelected($event)"
      class="w-full" />
    @if (fileError()) {
      <p class="text-red-500 text-sm mt-1">{{ fileError() }}</p>
    }
  </div>

  <div>
    <label for="coverLetter" class="block mb-1 font-semibold">
      Cover Letter
    </label>
    <textarea
      id="coverLetter"
      formControlName="coverLetter"
      class="input-field border rounded px-3 py-2 w-full resize-y focus:outline-none focus:ring-2 focus:ring-blue-500"
      rows="4"></textarea>
  </div>

  <div class="flex justify-end gap-4">
    <button
      type="button"
      class="btn-secondary px-4 py-2 rounded border border-gray-300 hover:bg-gray-100"
      (click)="cancelForm.emit()"
      [disabled]="submitting()">
      Cancel
    </button>
    <button
      type="submit"
      class="btn-primary px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-400"
      [disabled]="submitting()">
      @if (submitting()) {
        <span>Submitting...</span>
      } @else {
        <span>Submit Application</span>
      }
    </button>
  </div>
</form>
